local player = game:GetService("Players").LocalPlayer
local gui = Instance.new("ScreenGui")
gui.Parent = player:FindFirstChild("PlayerGui")

-- Crear interfaz
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 220, 0, 140)
frame.Position = UDim2.new(0.4, 0, 0.2, 0)
frame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
frame.Parent = gui
frame.Active = true
frame.Draggable = true -- Permite mover la interfaz

-- Texto "Ohma Edless Dx" con colores
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.Position = UDim2.new(0, 0, 0, 5)
title.Text = "Ohma Edless Dx"
title.Font = Enum.Font.SourceSansBold
title.TextSize = 20
title.TextColor3 = Color3.fromRGB(math.random(100,255), math.random(100,255), math.random(100,255))
title.BackgroundTransparency = 1
title.Parent = frame

-- Efecto de cambio de color
task.spawn(function()
    while true do
        title.TextColor3 = Color3.fromRGB(math.random(100,255), math.random(100,255), math.random(100,255))
        task.wait(0.5)
    end
end)

-- Botón Auto Pull Ups Keys
local autoPullUpsButton = Instance.new("TextButton")
autoPullUpsButton.Size = UDim2.new(0, 200, 0, 40)
autoPullUpsButton.Position = UDim2.new(0, 10, 0, 40)
autoPullUpsButton.Text = "Auto Pull Ups: OFF"
autoPullUpsButton.Parent = frame
autoPullUpsButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)

-- Variable de control
local autoPullUps = false
local validKeys = { W = Enum.KeyCode.W, A = Enum.KeyCode.A, S = Enum.KeyCode.S, D = Enum.KeyCode.D }

-- Función para obtener `Keys`
local function checkFrame2Keys()
    local pullupGui = player.PlayerGui:FindFirstChild("PullupGain")
    if pullupGui then
        local frame2 = pullupGui:FindFirstChild("Frame2")
        if frame2 then
            local keysFrame = frame2:FindFirstChild("Keys")
            return keysFrame
        end
    end
    return nil
end

-- Función para detectar y presionar la tecla
local function pressKeyFromFrame()
    local keysFrame = checkFrame2Keys()
    
    if keysFrame then
        for _, child in pairs(keysFrame:GetChildren()) do
            if validKeys[child.Name] then -- Si el nombre del objeto es W, A, S o D
                print("[✅] Presionando tecla: " .. child.Name)
                game:GetService("VirtualInputManager"):SendKeyEvent(true, validKeys[child.Name], false, game)
                task.wait(0.1)
            end
        end
    end
end

-- Loop automático
local function autoPressKeys()
    while autoPullUps do
        pressKeyFromFrame()
        task.wait(0.1)
    end
end

-- Evento del botón
autoPullUpsButton.MouseButton1Click:Connect(function()
    autoPullUps = not autoPullUps
    autoPullUpsButton.Text = "Auto Pull Ups: " .. (autoPullUps and "ON" or "OFF")
    if autoPullUps then
        autoPressKeys()
    end
end)
